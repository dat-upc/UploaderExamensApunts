# Copyright (C) 2019 Aniol Marti
# This file is part of DAT - UploaderExamensApunts.
#
# DAT - UploaderExamensApunts is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# DAT - UploaderExamensApunts is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with DAT - UploaderExamensApunts. If not, see <https://www.gnu.org/licenses/>.
#
import os
from UploaderExamensApunts.constants import *

# Returns a dictionary with "shortName": "relPath".
def seek_subjects(degree):
    search_path = os.path.join(ABS_FINAL_DIR, degree)
    paths = [name for name in os.listdir(search_path) if os.path.isdir(os.path.join(search_path, name))]
    subjects = {}
    print("Hello, World!")
    for p in paths:
        dot = p.find('.')
        dash = p.find('-')
        if dash == -1:
            subjects[p[dot+1:]] = degree + '/' + p
        else:
            subjects[p[dot + 1:dash]] = degree + '/' + p

    return subjects
